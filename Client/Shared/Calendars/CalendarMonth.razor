@using Microsoft.AspNetCore.Components

<div class="calendar-container">
    @if (DaysInMonth.Any())
    {
        <div class="month-header"
             style="background-color:@(DaysInMonth.First().Month == DateTime.Now.Month && DaysInMonth.First().Year == DateTime.Now.Year ? "royalblue" : "gray")">
            @DaysInMonth.First().ToString("MMMM yyyy").ToUpper()
        </div>

        <div class="calendar-grid">
            <!-- Day headers -->
            <div class="day-header">SUN</div>
            <div class="day-header">MON</div>
            <div class="day-header">TUE</div>
            <div class="day-header">WED</div>
            <div class="day-header">THU</div>
            <div class="day-header">FRI</div>
            <div class="day-header">SAT</div>

            <!-- Empty slots before first day -->
            @for (int i = 0; i < StartOffset; i++)
            {
                <div class="calendar-day empty"></div>
            }

            <!-- Actual days -->
            @foreach (var day in DaysInMonth)
            {
                <div class="calendar-day @(day.DayOfWeek == DayOfWeek.Sunday ? "sunday" : "") @(day.Date == DateTime.Today.Date ? "today" : "")"
                     @onclick="() => OnDayClicked.InvokeAsync(day)">
                    <p class="calendar-day-number">@day.Day</p>
                </div>
            }

            <!-- Empty slots after last day -->
            @for (int i = 0; i < EndOffset; i++)
            {
                <div class="calendar-day empty"></div>
            }
        </div>
    }
</div>

<style>
    .calendar-container {
        width: 100%;
        margin: 5px;
    }
    .month-header {
        font-weight: bold;
        text-align: center;
        padding: 10px;
        font-size: 1.3rem;
        color: white;
        border: 1px solid #ccc;
    }

    .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        width: 100%;
        border: 1px solid #ccc;
    }

    .day-header {
        font-weight: bold;
        text-align: center;
        padding: 5px;
        font-size: 0.85rem;
        color: white;
        background-color: royalblue;
        border: 1px solid #ccc;
    }

    .calendar-day {
        color: darkblue;
        border: 1px solid #ccc;
        text-align: center;
        padding: 10px;
        min-height: 80px;
        cursor: pointer;
    }

    .calendar-day:hover {
        background-color: #f0f0f0;
    }

    .calendar-day.empty {
        background-color: #fafafa;
        border: 1px solid #ccc;
        cursor: default;
    }

    .calendar-day.sunday {
        color: red;
        font-weight: bold;
    }

    .calendar-day-number {
        font-size: 1.5rem;
        font-weight: bold;
    }

    .calendar-day.today {
        background-color: yellow;
    }
</style>

@code {
    [Parameter] public List<DateTime> DaysInMonth { get; set; } = new();
    [Parameter] public int StartOffset { get; set; }
    [Parameter] public int EndOffset { get; set; }
    [Parameter] public EventCallback<DateTime> OnDayClicked { get; set; }
}
